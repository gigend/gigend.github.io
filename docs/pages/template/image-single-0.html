
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js" async></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/css/lightgallery-bundle.min.css" />

<style>
  .portfolio-item {
    margin-bottom: 20px;
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.05);
    transition: transform 0.3s ease;
  }

  .portfolio-item:hover {
    transform: translateY(-4px);
  }
</style>

    <!-- Portfolio Item / Image Only -->
    <div id="single-gallery">
      <div class="portfolio-item wow animate__animated animate__fadeInUp">
        <img data-src="https://placehold.co/1280x720" class="lazyload portfolio-image" alt="Project 1">
      </div>
      <!-- Tambah item lainnya -->
    </div>    

<!-- LightGallery JS -->
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/lightgallery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/plugins/rotate/lg-rotate.min.js"></script>

<script>
  // Light Box Gallery Script
  document.addEventListener('DOMContentLoaded', function () {
    const galleryContainer = document.getElementById('single-gallery');
    const images = galleryContainer.querySelectorAll('img[data-src]');
    const preloadPromises = [];

    images.forEach((img) => {
      if (img.parentElement.tagName.toLowerCase() === 'a') return;

      const src = img.getAttribute('data-src');

      const promise = new Promise((resolve) => {
        const tempImg = new Image();
        tempImg.onload = function () {
          const width = tempImg.naturalWidth;
          const height = tempImg.naturalHeight;

          const link = document.createElement('a');
          link.href = src;
          link.setAttribute('data-lg-size', `${width}-${height}`);
          
          const clone = img.cloneNode(true);
          link.appendChild(clone);
          img.parentElement.replaceChild(link, img);

          resolve(); // lanjutkan setelah gambar dibungkus
        };
        tempImg.src = src;
      });

      preloadPromises.push(promise);
    });

    Promise.all(preloadPromises).then(() => {
      lightGallery(galleryContainer, {
        selector: 'a',
        plugins: [lgZoom, lgRotate],
        speed: 500,
        rotate: true,
        download: false,
        zoom: true,
        actualSize: true, // Ini penting agar zoom fleksibel
        scale: 1, // Default zoom scale saat gambar dibuka
        hideBarsDelay: 0, // prevent auto-hide
        showCloseIcon: true, // pastikan tombol close muncul
        mobileSettings: {
          controls: false,
          showCloseIcon: true,
          enableDrag: true,
          enableSwipe: true,
        },
        animateThumb: true,
        zoomFromOrigin: true,
      });
    });
  });
</script>